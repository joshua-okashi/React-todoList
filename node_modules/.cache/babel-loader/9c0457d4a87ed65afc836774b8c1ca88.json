{"ast":null,"code":"import _classCallCheck from \"C:\\\\WEB2\\\\React\\\\todolist\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\WEB2\\\\React\\\\todolist\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\WEB2\\\\React\\\\todolist\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\WEB2\\\\React\\\\todolist\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\WEB2\\\\React\\\\todolist\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\WEB2\\\\React\\\\todolist\\\\src\\\\UserDialog.js\";\nimport React, { Component } from 'react';\nimport './UserDialog.css';\nimport { signUp as _signUp, signIn as _signIn } from './leanCloud';\n\nvar UserDialog =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserDialog, _Component);\n\n  function UserDialog(props) {\n    var _this;\n\n    _classCallCheck(this, UserDialog);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserDialog).call(this, props));\n    _this.state = {\n      selected: 'signUp',\n      selectedTab: 'signInOrSignUp',\n      formData: {\n        email: '',\n        username: '',\n        password: ''\n      }\n    };\n    return _this;\n  }\n\n  _createClass(UserDialog, [{\n    key: \"switch\",\n    value: function _switch(e) {\n      this.setState({\n        selected: e.target.value\n      });\n    }\n  }, {\n    key: \"signUp\",\n    value: function signUp(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      var _this$state$formData = this.state.formData,\n          email = _this$state$formData.email,\n          username = _this$state$formData.username,\n          password = _this$state$formData.password;\n\n      var success = function success(user) {\n        _this2.props.onSignUp.call(null, user);\n      };\n\n      var error = function error(_error) {\n        switch (_error.code) {\n          case 202:\n            alert('用户名已被占用');\n            break;\n\n          default:\n            alert(_error);\n            break;\n        }\n      };\n\n      _signUp(email, username, password, success, error);\n    }\n  }, {\n    key: \"signIn\",\n    value: function signIn(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n      var _this$state$formData2 = this.state.formData,\n          username = _this$state$formData2.username,\n          password = _this$state$formData2.password;\n\n      var success = function success(user) {\n        _this3.props.onSignIn.call(null, user);\n      };\n\n      var error = function error(_error2) {\n        switch (_error2.code) {\n          case 210:\n            alert('用户名与密码不匹配');\n            break;\n\n          default:\n            alert(_error2);\n            break;\n        }\n      };\n\n      _signIn(username, password, success, error);\n    }\n  }, {\n    key: \"changeFormData\",\n    value: function changeFormData(key, e) {\n      var stateCopy = JSON.parse(JSON.stringify(this.state));\n      stateCopy.formData[key] = e.target.value;\n      this.setState(stateCopy);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var signUpForm = React.createElement(\"form\", {\n        className: \"signUp\",\n        onSubmit: this.signUp.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \" \", React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"\\u90AE\\u7BB1\"), React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.formData.email,\n        onChange: this.changeFormData.bind(this, 'email'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"\\u7528\\u6237\\u540D\"), React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.formData.username,\n        onChange: this.changeFormData.bind(this, 'username'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"\\u5BC6\\u7801\"), React.createElement(\"input\", {\n        type: \"password\",\n        value: this.state.formData.password,\n        onChange: this.changeFormData.bind(this, 'password'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row actions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"\\u6CE8\\u518C\")));\n      var signInForm = React.createElement(\"form\", {\n        className: \"signIn\",\n        onSubmit: this.signIn.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \" \", React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"\\u7528\\u6237\\u540D\"), React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.formData.username,\n        onChange: this.changeFormData.bind(this, 'username'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"\\u5BC6\\u7801\"), React.createElement(\"input\", {\n        type: \"password\",\n        value: this.state.formData.password,\n        onChange: this.changeFormData.bind(this, 'password'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row actions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"\\u767B\\u5F55\"), React.createElement(\"a\", {\n        href: \"#\",\n        onClick: this.showForgotPassword.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"\\u5FD8\\u8BB0\\u5BC6\\u7801\\u4E86\\uFF1F\")));\n      var signInOrSignUp = React.createElement(\"div\", {\n        className: \"signInOrSignUp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"nav\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"radio\",\n        value: \"signUp\",\n        checked: this.state.selected === 'signUp',\n        onChange: this.switch.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }), \" \\u6CE8\\u518C\"), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"radio\",\n        value: \"signIn\",\n        checked: this.state.selected === 'signIn',\n        onChange: this.switch.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }), \" \\u767B\\u5F55\")), React.createElement(\"div\", {\n        className: \"panes\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, this.state.selected === 'signUp' ? signUpForm : null, this.state.selected === 'signIn' ? signInForm : null));\n      var forgotPassword = React.createElement(\"div\", {\n        className: \"forgotPassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"\\u91CD\\u7F6E\\u5BC6\\u7801\"), React.createElement(\"form\", {\n        className: \"forgotPassword\",\n        onSubmit: this.resetPassword.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \" \", React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"\\u90AE\\u7BB1\"), React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.formData.email,\n        onChange: this.changeFormData.bind(this, 'email'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row actions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"\\u53D1\\u9001\\u91CD\\u7F6E\\u90AE\\u4EF6\"))));\n      return React.createElement(\"div\", {\n        className: \"UserDialog-Wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"UserDialog\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, this.state.selectedTab === 'signInOrSignUp' ? signInOrSignUp : forgotPassword));\n    }\n  }, {\n    key: \"showForgotPassword\",\n    value: function showForgotPassword() {\n      var stateCopy = JSON.parse(JSON.stringify(this.state));\n      stateCopy.selectedTab = 'forgotPassword';\n      this.setState(stateCopy);\n    }\n  }, {\n    key: \"resetPassword\",\n    value: function resetPassword() {}\n  }]);\n\n  return UserDialog;\n}(Component);\n\nexport { UserDialog as default };","map":{"version":3,"sources":["C:\\WEB2\\React\\todolist\\src\\UserDialog.js"],"names":["React","Component","signUp","signIn","UserDialog","props","state","selected","selectedTab","formData","email","username","password","e","setState","target","value","preventDefault","success","user","onSignUp","call","error","code","alert","onSignIn","key","stateCopy","JSON","parse","stringify","signUpForm","bind","changeFormData","signInForm","showForgotPassword","signInOrSignUp","switch","forgotPassword","resetPassword"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './UserDialog.css'\r\nimport {signUp,signIn} from './leanCloud'\r\n\r\nexport default class UserDialog extends Component{\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      selected: 'signUp',\r\n      selectedTab: 'signInOrSignUp',\r\n      formData: {\r\n        email: '',\r\n        username: '',\r\n        password: '',\r\n      }\r\n    }\r\n  }\r\n  switch(e){\r\n    this.setState({\r\n      selected: e.target.value\r\n    })\r\n  }\r\n\r\n  signUp(e){\r\n    e.preventDefault()\r\n    let {email, username, password} = this.state.formData\r\n    let success = (user)=>{\r\n      this.props.onSignUp.call(null, user)\r\n    }\r\n    let error = (error)=>{\r\n      switch(error.code){\r\n        case 202:\r\n          alert('用户名已被占用')\r\n          break\r\n        default:\r\n          alert(error)\r\n          break\r\n      }\r\n    }\r\n    signUp(email, username, password, success, error)\r\n  }\r\n  signIn(e){\r\n    e.preventDefault()\r\n    let {username, password} = this.state.formData\r\n    let success = (user)=>{\r\n      this.props.onSignIn.call(null, user)\r\n    }\r\n    let error = (error)=>{\r\n      switch(error.code){\r\n        case 210:\r\n          alert('用户名与密码不匹配')\r\n          break\r\n        default:\r\n          alert(error)\r\n          break\r\n      }\r\n    }\r\n    signIn(username, password, success, error)\r\n  }\r\n \r\n  changeFormData(key, e){\r\n    let stateCopy = JSON.parse(JSON.stringify(this.state))\r\n    stateCopy.formData[key] = e.target.value\r\n    this.setState(stateCopy)\r\n  }\r\n    \r\n  render(){\r\n    let signUpForm = (\r\n      <form className=\"signUp\" onSubmit={this.signUp.bind(this)}> {/* 注册*/}\r\n        <div className=\"row\">\r\n        <label>邮箱</label> \r\n        <input type=\"text\" value={this.state.formData.email}\r\n          onChange={this.changeFormData.bind(this, 'email')}/>\r\n        </div>\r\n        <div className=\"row\">\r\n          <label>用户名</label> \r\n          <input type=\"text\" value={this.state.formData.username}\r\n          onChange={this.changeFormData.bind(this, 'username')}/>\r\n        </div>\r\n        <div className=\"row\">\r\n          <label>密码</label>\r\n          <input type=\"password\" value={this.state.formData.password} \r\n          onChange={this.changeFormData.bind(this, 'password')}/>\r\n        </div>\r\n        <div className=\"row actions\">\r\n          <button type=\"submit\">注册</button>\r\n        </div>\r\n      </form>\r\n    )\r\n    let signInForm = (\r\n      <form className=\"signIn\" onSubmit={this.signIn.bind(this)}> {/* 登录*/}\r\n        <div className=\"row\">\r\n          <label>用户名</label>\r\n          <input type=\"text\" value={this.state.formData.username}\r\n          onChange={this.changeFormData.bind(this, 'username')}/>\r\n        </div>\r\n        <div className=\"row\">\r\n          <label>密码</label>\r\n          <input type=\"password\" value={this.state.formData.password}\r\n          onChange={this.changeFormData.bind(this, 'password')}/>\r\n        </div>\r\n        <div className=\"row actions\">\r\n          <button type=\"submit\">登录</button>\r\n          <a href=\"#\" onClick={this.showForgotPassword.bind(this)}>忘记密码了？</a>\r\n        </div>\r\n      </form>\r\n    ) \r\n\r\n        let signInOrSignUp = (\r\n      <div className=\"signInOrSignUp\">\r\n        <nav>\r\n          <label>\r\n            <input type=\"radio\" value=\"signUp\" \r\n              checked={this.state.selected === 'signUp'}\r\n              onChange={this.switch.bind(this)}/> 注册</label>\r\n          <label>\r\n            <input type=\"radio\" value=\"signIn\" \r\n              checked={this.state.selected === 'signIn'}\r\n              onChange={this.switch.bind(this)}/> 登录</label>\r\n        </nav>\r\n        <div className=\"panes\">\r\n          {this.state.selected === 'signUp' ? signUpForm : null}\r\n          {this.state.selected === 'signIn' ? signInForm : null}\r\n        </div>\r\n      </div>\r\n    )\r\n\r\n    let forgotPassword = (\r\n      <div className=\"forgotPassword\">\r\n        <h3>\r\n          重置密码\r\n        </h3>\r\n        <form className=\"forgotPassword\" onSubmit={this.resetPassword.bind(this)}> {/* 登录*/}\r\n          <div className=\"row\">\r\n            <label>邮箱</label>\r\n            <input type=\"text\" value={this.state.formData.email}\r\n              onChange={this.changeFormData.bind(this, 'email')}/>\r\n          </div>\r\n          <div className=\"row actions\">\r\n            <button type=\"submit\">发送重置邮件</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    )\r\n\r\n    \r\n    return (\r\n      <div className=\"UserDialog-Wrapper\">\r\n        <div className=\"UserDialog\">\r\n          {this.state.selectedTab === 'signInOrSignUp' ? signInOrSignUp : forgotPassword}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  showForgotPassword(){\r\n    let stateCopy = JSON.parse(JSON.stringify(this.state))\r\n    stateCopy.selectedTab = 'forgotPassword'\r\n    this.setState(stateCopy)\r\n  }\r\n  resetPassword(){\r\n\r\n  }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}