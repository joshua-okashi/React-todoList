{"ast":null,"code":"import _objectSpread from \"C:\\\\WEB2\\\\React\\\\todolist\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport AV from 'leancloud-storage'; //  在线存储\n\nvar APP_ID = 'EckJaPUPPEdW19WxjJQa2EFe-gzGzoHsz';\nvar APP_KEY = 'dtilTjwfUeEYq14HThDuu9nI';\nAV.init({\n  appId: APP_ID,\n  appKey: APP_KEY\n});\nexport function signUp(email, username, password, successFn, errorFn) {\n  var user = new AV.User();\n  user.setUsername(username);\n  user.setPassword(password);\n  user.setEmail(email);\n  user.signUp().then(function (loginedUser) {\n    var user = getUserFromAVUser(loginedUser);\n    successFn.call(null, user);\n  }, function (error) {\n    errorFn.call(null, error);\n  });\n  return undefined;\n}\nexport function signIn(username, password, successFn, errorFn) {\n  AV.User.logIn(username, password).then(function (loginedUser) {\n    var user = getUserFromAVUser(loginedUser);\n    successFn.call(null, user);\n  }, function (error) {\n    errorFn.call(null, error);\n  });\n}\nexport function signOut() {\n  AV.User.logOut();\n  return undefined;\n}\nexport function sendPasswordResetEmail(email, successFn, errorFn) {\n  AV.User.requestPasswordReset(email).then(function (success) {\n    successFn.call();\n  }, function (error) {\n    errorFn.call(null, error);\n  });\n}\nexport function getCurrentUser() {\n  var user = AV.User.current();\n\n  if (user) {\n    return getUserFromAVUser(user);\n  } else {\n    return null;\n  }\n}\n\nfunction getUserFromAVUser(AVUser) {\n  return _objectSpread({\n    id: AVUser.id\n  }, AVUser.attributes);\n}","map":{"version":3,"sources":["C:\\WEB2\\React\\todolist\\src\\leanCloud.js"],"names":["AV","APP_ID","APP_KEY","init","appId","appKey","signUp","email","username","password","successFn","errorFn","user","User","setUsername","setPassword","setEmail","then","loginedUser","getUserFromAVUser","call","error","undefined","signIn","logIn","signOut","logOut","sendPasswordResetEmail","requestPasswordReset","success","getCurrentUser","current","AVUser","id","attributes"],"mappings":";AAAA,OAAOA,EAAP,MAAe,mBAAf,C,CAEA;;AACA,IAAIC,MAAM,GAAG,mCAAb;AACA,IAAIC,OAAO,GAAG,0BAAd;AACAF,EAAE,CAACG,IAAH,CAAQ;AACNC,EAAAA,KAAK,EAAEH,MADD;AAENI,EAAAA,MAAM,EAAEH;AAFF,CAAR;AAMA,OAAO,SAASI,MAAT,CAAiBC,KAAjB,EAAwBC,QAAxB,EAAkCC,QAAlC,EAA4CC,SAA5C,EAAuDC,OAAvD,EAAgE;AAErE,MAAIC,IAAI,GAAG,IAAIZ,EAAE,CAACa,IAAP,EAAX;AAEAD,EAAAA,IAAI,CAACE,WAAL,CAAiBN,QAAjB;AAEAI,EAAAA,IAAI,CAACG,WAAL,CAAiBN,QAAjB;AAEAG,EAAAA,IAAI,CAACI,QAAL,CAAcT,KAAd;AAEAK,EAAAA,IAAI,CAACN,MAAL,GAAcW,IAAd,CAAmB,UAAUC,WAAV,EAAuB;AACxC,QAAIN,IAAI,GAAGO,iBAAiB,CAACD,WAAD,CAA5B;AACAR,IAAAA,SAAS,CAACU,IAAV,CAAe,IAAf,EAAqBR,IAArB;AACD,GAHD,EAGG,UAAUS,KAAV,EAAiB;AAClBV,IAAAA,OAAO,CAACS,IAAR,CAAa,IAAb,EAAmBC,KAAnB;AACD,GALD;AAOA,SAAOC,SAAP;AACD;AAED,OAAO,SAASC,MAAT,CAAiBf,QAAjB,EAA2BC,QAA3B,EAAqCC,SAArC,EAAgDC,OAAhD,EAAyD;AAC9DX,EAAAA,EAAE,CAACa,IAAH,CAAQW,KAAR,CAAchB,QAAd,EAAwBC,QAAxB,EAAkCQ,IAAlC,CAAuC,UAAUC,WAAV,EAAuB;AAC5D,QAAIN,IAAI,GAAGO,iBAAiB,CAACD,WAAD,CAA5B;AACAR,IAAAA,SAAS,CAACU,IAAV,CAAe,IAAf,EAAqBR,IAArB;AACD,GAHD,EAGG,UAAUS,KAAV,EAAiB;AAClBV,IAAAA,OAAO,CAACS,IAAR,CAAa,IAAb,EAAmBC,KAAnB;AACD,GALD;AAMD;AACD,OAAO,SAASI,OAAT,GAAoB;AACzBzB,EAAAA,EAAE,CAACa,IAAH,CAAQa,MAAR;AACA,SAAOJ,SAAP;AACD;AACD,OAAO,SAASK,sBAAT,CAAiCpB,KAAjC,EAAwCG,SAAxC,EAAmDC,OAAnD,EAA4D;AACjEX,EAAAA,EAAE,CAACa,IAAH,CAAQe,oBAAR,CAA6BrB,KAA7B,EAAoCU,IAApC,CAAyC,UAAUY,OAAV,EAAmB;AAC1DnB,IAAAA,SAAS,CAACU,IAAV;AACD,GAFD,EAEG,UAAUC,KAAV,EAAiB;AAClBV,IAAAA,OAAO,CAACS,IAAR,CAAa,IAAb,EAAmBC,KAAnB;AACD,GAJD;AAKD;AACD,OAAO,SAASS,cAAT,GAA2B;AAChC,MAAIlB,IAAI,GAAGZ,EAAE,CAACa,IAAH,CAAQkB,OAAR,EAAX;;AACA,MAAInB,IAAJ,EAAU;AACR,WAAOO,iBAAiB,CAACP,IAAD,CAAxB;AACD,GAFD,MAEO;AACL,WAAO,IAAP;AACD;AACF;;AACD,SAASO,iBAAT,CAA4Ba,MAA5B,EAAoC;AAClC;AACEC,IAAAA,EAAE,EAAED,MAAM,CAACC;AADb,KAEKD,MAAM,CAACE,UAFZ;AAID","sourcesContent":["import AV from 'leancloud-storage'\r\n\r\n//  在线存储\r\nvar APP_ID = 'EckJaPUPPEdW19WxjJQa2EFe-gzGzoHsz'\r\nvar APP_KEY = 'dtilTjwfUeEYq14HThDuu9nI'\r\nAV.init({\r\n  appId: APP_ID,\r\n  appKey: APP_KEY\r\n})\r\n\r\n\r\nexport function signUp (email, username, password, successFn, errorFn) {\r\n\r\n  var user = new AV.User()\r\n\r\n  user.setUsername(username)\r\n\r\n  user.setPassword(password)\r\n\r\n  user.setEmail(email)\r\n\r\n  user.signUp().then(function (loginedUser) {\r\n    let user = getUserFromAVUser(loginedUser)\r\n    successFn.call(null, user)\r\n  }, function (error) {\r\n    errorFn.call(null, error)\r\n  })\r\n\r\n  return undefined\r\n}\r\n\r\nexport function signIn (username, password, successFn, errorFn) {\r\n  AV.User.logIn(username, password).then(function (loginedUser) {\r\n    let user = getUserFromAVUser(loginedUser)\r\n    successFn.call(null, user)\r\n  }, function (error) {\r\n    errorFn.call(null, error)\r\n  })\r\n}\r\nexport function signOut () {\r\n  AV.User.logOut()\r\n  return undefined\r\n}\r\nexport function sendPasswordResetEmail (email, successFn, errorFn) {\r\n  AV.User.requestPasswordReset(email).then(function (success) {\r\n    successFn.call()\r\n  }, function (error) {\r\n    errorFn.call(null, error)\r\n  })\r\n}\r\nexport function getCurrentUser () {\r\n  let user = AV.User.current()\r\n  if (user) {\r\n    return getUserFromAVUser(user)\r\n  } else {\r\n    return null\r\n  }\r\n}\r\nfunction getUserFromAVUser (AVUser) {\r\n  return {\r\n    id: AVUser.id,\r\n    ...AVUser.attributes\r\n  }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}